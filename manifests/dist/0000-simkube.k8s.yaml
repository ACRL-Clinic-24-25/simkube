apiVersion: v1
kind: ConfigMap
metadata:
  name: simkube-configmap-c820ec75
  namespace: default
data:
  node.yml: |
    ---
    apiVersion: v1
    kind: Node
    status:
      allocatable:
        cpu: "1"
        memory: "1Gi"
      capacity:
        cpu: "1"
        memory: "1Gi"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: simkube-service-account-c8b55ff9
  namespace: default
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: simkube-cluster-role-binding-c84acdc6
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
  - kind: ServiceAccount
    name: simkube-service-account-c8b55ff9
    namespace: default
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: simkube
  name: simkube-deployment-c8a2ece8
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: simkube
  template:
    metadata:
      labels:
        app: simkube
      namespace: default
    spec:
      containers:
        - args:
            - --node-skeleton
            - /config/node.yml
          command:
            - /simkube
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: POD_OWNER
              value: simkube-deployment-c8a2ece8
          image: localhost:5000/simkube:latest
          name: simkube
          securityContext:
            capabilities:
              add:
                - SYS_PTRACE
          volumeMounts:
            - mountPath: /config
              name: node-skeleton
      nodeSelector:
        type: kind-worker
      serviceAccountName: simkube-service-account-c8b55ff9
      volumes:
        - configMap:
            items:
              - key: node.yml
                path: node.yml
            name: simkube-configmap-c820ec75
          name: node-skeleton
